---
apiVersion: v1
kind: Namespace
metadata:
  name: external-dns
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  creationTimestamp: null
  name: digital-ocean-token
  namespace: external-dns
spec:
  encryptedData:
    DO_TOKEN: AgCTEKMUyZzxgldlvqKtTYiVowQJp2aq9yKpS6iLdfxwoi1cGhI9dmR2lVPI11bRLSyup6ekDaTXXSVMQiIb/JZVdNu9LNGLGgCgtxWPCDD1d/Bn42erH4Bx4GH4zldo+n5+BFom9/5z14XLPvn1g3ZN8io7enPlAIddIXDiMYN+HaHcavmOdYsou+sxdGYWAvyw4jYR0JcQeiJRZ4KZeUEbTP6/UC/J2eM72aRVVk//u7EeE8jap+o/HGukHu1AGeT1gxyICVx1QJCmdRClz4sKD0HyWZF+5DwHKPFLOn0fZJmW3ZacqCDtkgUZ2hpUpzfdcEcLAQu7lZTaRa+BsitUDriEctEhLF8iWdP8MnaETeBaBtTEvmd0WLORybMoExiha6nABvowGuYfBWpC5fh3PnERSxb8UgSwRQz70CTZSDTogyieiPBz1nlNkduxX29cEFf+cBxULWKsRbMB3KRgCwE9+49K7KTu4+dPEklVggpRAmBskB+23+IfOyXydU52GlfyEjZJYRh4Dmg0qhPcGN5kvKp+dzy4TPPvQ6xTNN/5UYksNNlzNuWVnlRr3UYvAkBvYeLfgY5G6btzKjbyzkIt6atReQ8b9juT5fqloNIwfp8LPFV3Kex7fIQ67nqapQVXAsDSCAW+pHqqAOkKODbcSu8Ah+qL4Lm7kwRApij7yGmDHDnGIVzNc+9dHEhWKSEToe9p+4rxxFURQSeBbW1c7q4VLEk472M4Xd5PwXi5iIE/Zu44aoOqA9rkeiIjfZis8sO1wBPa08/Ev9wMY+DzJWTBDw==
  template:
    metadata:
      creationTimestamp: null
      name: digital-ocean-token
      namespace: external-dns
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: HelmRepository
metadata:
  name: external-dns
  namespace: external-dns
spec:
  interval: 24h
  url: https://kubernetes-sigs.github.io/external-dns/
---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: external-dns
  namespace: external-dns
spec:
  interval: 30m
  chart:
    spec:
      chart: external-dns
      version: "1.x"
      sourceRef:
        kind: HelmRepository
        name: external-dns
        namespace: external-dns
      interval: 12h
  values:
    provider: 
      name: digitalocean
    sources:
      - gateway-httproute
    env:
      - name: DO_TOKEN
        valueFrom:
          secretKeyRef:
            name: digital-ocean-token
            key: DO_TOKEN
